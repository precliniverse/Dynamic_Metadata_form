{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://raw.githubusercontent.com/precliniverse/Dynamic_Metadata_form/refs/heads/main/schema.json",
  "version": "3.1.0",
  "meta": {
    "title": "Open Science Dataset Registration Wizard",
    "description": "Schema 100% declaratif. Toute la logique metier, les APIs, les conditions et le mapping de sortie sont ici.",
    "changelog": "3.1.0 - Nouvelles sections: licence (SPDX), identifiants li√©s, financement, analyse (OBI), cohorte & points temporels. Export JSON, validation, brouillon.",
    "publisher_default": "FAIR3R"
  },
  "apis": {
    "orcid": {
      "label": "ORCID",
      "url": "https://pub.orcid.org/v3.0/expanded-search",
      "headers": {
        "Accept": "application/vnd.orcid+json"
      },
      "query_param": "q",
      "result_path": "expanded-result",
      "result_limit": 8,
      "mapper": {
        "strategy": "nested_object",
        "label": "{{given-names}} {{family-names}}",
        "sublabel": "{{institution-name.[0]}}",
        "id": "https://orcid.org/{{orcid-id}}",
        "scheme": "ORCID"
      }
    },
    "ror": {
      "label": "ROR",
      "url": "https://api.ror.org/organizations",
      "query_param": "query",
      "result_path": "items",
      "result_limit": 10,
      "mapper": {
        "strategy": "array_find",
        "label": "{{names.[?types=ror_display].value || names.[?types=label].value}}",
        "sublabel": "{{addresses.[0].city}}, {{country.country_name}}",
        "id": "{{id}}",
        "scheme": "ROR"
      }
    },
    "ols_ncbitaxon": {
      "label": "NCBI Taxonomy (OLS4)",
      "url": "https://www.ebi.ac.uk/ols4/api/select",
      "query_param": "q",
      "extra_params": {
        "ontology": "ncbitaxon",
        "rows": 10
      },
      "result_path": "response.docs",
      "mapper": {
        "strategy": "obo_ontology",
        "scheme": "NCBITaxon"
      }
    },
    "ols_efo": {
      "label": "EFO (OLS4)",
      "url": "https://www.ebi.ac.uk/ols4/api/select",
      "query_param": "q",
      "extra_params": {
        "ontology": "efo",
        "rows": 10
      },
      "result_path": "response.docs",
      "mapper": {
        "strategy": "obo_ontology",
        "scheme": "EFO"
      }
    },
    "ols_chebi": {
      "label": "ChEBI (OLS4)",
      "url": "https://www.ebi.ac.uk/ols4/api/select",
      "query_param": "q",
      "extra_params": {
        "ontology": "chebi",
        "rows": 10
      },
      "result_path": "response.docs",
      "mapper": {
        "strategy": "obo_ontology",
        "scheme": "ChEBI"
      }
    },
    "ols_doid": {
      "label": "Disease Ontology (OLS4)",
      "url": "https://www.ebi.ac.uk/ols4/api/select",
      "query_param": "q",
      "extra_params": {
        "ontology": "doid",
        "rows": 10
      },
      "result_path": "response.docs",
      "mapper": {
        "strategy": "obo_ontology",
        "scheme": "DOID"
      }
    },
    "ols_uberon": {
      "label": "UBERON (OLS4)",
      "url": "https://www.ebi.ac.uk/ols4/api/select",
      "query_param": "q",
      "extra_params": {
        "ontology": "uberon",
        "rows": 10
      },
      "result_path": "response.docs",
      "mapper": {
        "strategy": "obo_ontology",
        "scheme": "UBERON"
      }
    },
    "ols_obi": {
      "label": "OBI ‚Äî Ontology for Biomedical Investigations",
      "url": "https://www.ebi.ac.uk/ols4/api/select",
      "query_param": "q",
      "extra_params": {
        "ontology": "obi",
        "rows": 10
      },
      "result_path": "response.docs",
      "mapper": {
        "strategy": "obo_ontology",
        "scheme": "OBI"
      }
    },
    "mygene": {
      "label": "MyGene.info",
      "url": "https://mygene.info/v3/query",
      "query_param": "q",
      "extra_params": {
        "fields": "symbol,name,taxid,MGI,RGD,ZFIN,ensembl.gene,entrezgene"
      },
      "extra_params_from_context": {
        "species": "organism_taxon_id"
      },
      "result_path": "hits",
      "result_limit": 8,
      "mapper": {
        "strategy": "flat_object",
        "label": "{{symbol}}",
        "sublabel": "{{name}}",
        "id": "https://identifiers.org/ncbigene:{{_id}}",
        "scheme": "GeneID",
        "xrefs": {
          "ncbi_gene": {
            "id": "{{_id}}",
            "uri": "https://identifiers.org/ncbigene:{{_id}}",
            "label": "NCBI Gene"
          },
          "mgi": {
            "condition": "{{MGI}}",
            "id": "{{MGI}}",
            "uri": "https://identifiers.org/mgi:{{MGI}}",
            "label": "MGI"
          },
          "rgd": {
            "condition": "{{RGD}}",
            "id": "{{RGD}}",
            "uri": "https://identifiers.org/rgd:{{RGD}}",
            "label": "RGD"
          },
          "zfin": {
            "condition": "{{ZFIN}}",
            "id": "{{ZFIN}}",
            "uri": "https://identifiers.org/zfin:{{ZFIN}}",
            "label": "ZFIN"
          },
          "ensembl": {
            "condition": "{{ensembl.gene}}",
            "id": "{{ensembl.gene}}",
            "uri": "https://identifiers.org/ensembl:{{ensembl.gene}}",
            "label": "Ensembl"
          }
        }
      }
    },
    "impc": {
      "label": "IMPC (IMPReSS)",
      "url": "https://www.ebi.ac.uk/mi/impc/solr/pipeline/select",
      "query_param": "q",
      "extra_params": {
        "wt": "json",
        "defType": "edismax",
        "qf": "procedure_name^10 parameter_name^5",
        "rows": 10
      },
      "result_path": "response.docs",
      "mapper": {
        "strategy": "flat_object",
        "label": "{{procedure_name}} - {{parameter_name}}",
        "sublabel": "{{pipeline_name}}",
        "id": "https://www.mousephenotype.org/impress/ParameterInfo?parameterId={{parameter_id}}",
        "scheme": "IMPReSS"
      }
    }
  },
  "vocabularies": {
    "spdx_licenses": {
      "label": "Licences SPDX",
      "items": [
        {
          "value": "CC0-1.0",
          "label": "CC0 1.0 ‚Äî Domaine public",
          "id": "https://creativecommons.org/publicdomain/zero/1.0/"
        },
        {
          "value": "CC-BY-4.0",
          "label": "CC BY 4.0 ‚Äî Attribution",
          "id": "https://creativecommons.org/licenses/by/4.0/"
        },
        {
          "value": "CC-BY-SA-4.0",
          "label": "CC BY-SA 4.0 ‚Äî Attribution-ShareAlike",
          "id": "https://creativecommons.org/licenses/by-sa/4.0/"
        },
        {
          "value": "CC-BY-NC-4.0",
          "label": "CC BY-NC 4.0 ‚Äî Attribution-NonCommercial",
          "id": "https://creativecommons.org/licenses/by-nc/4.0/"
        },
        {
          "value": "CC-BY-ND-4.0",
          "label": "CC BY-ND 4.0 ‚Äî Attribution-NoDerivs",
          "id": "https://creativecommons.org/licenses/by-nd/4.0/"
        },
        {
          "value": "ODbL-1.0",
          "label": "ODbL 1.0 ‚Äî Open Database License",
          "id": "https://opendatacommons.org/licenses/odbl/1-0/"
        },
        {
          "value": "PDDL-1.0",
          "label": "PDDL 1.0 ‚Äî Public Domain Dedication",
          "id": "https://opendatacommons.org/licenses/pddl/1-0/"
        },
        {
          "value": "MIT",
          "label": "MIT License",
          "id": "https://opensource.org/licenses/MIT"
        },
        {
          "value": "Apache-2.0",
          "label": "Apache License 2.0",
          "id": "https://www.apache.org/licenses/LICENSE-2.0"
        },
        {
          "value": "GPL-3.0-only",
          "label": "GNU GPL v3.0",
          "id": "https://www.gnu.org/licenses/gpl-3.0.html"
        },
        {
          "value": "LGPL-3.0-only",
          "label": "GNU LGPL v3.0",
          "id": "https://www.gnu.org/licenses/lgpl-3.0.html"
        },
        {
          "value": "BSD-2-Clause",
          "label": "BSD 2-Clause License",
          "id": "https://opensource.org/licenses/BSD-2-Clause"
        },
        {
          "value": "BSD-3-Clause",
          "label": "BSD 3-Clause License",
          "id": "https://opensource.org/licenses/BSD-3-Clause"
        },
        {
          "value": "Proprietary",
          "label": "Proprietary / Restricted",
          "id": ""
        }
      ]
    },
    "credit_roles": {
      "label": "Roles CRediT",
      "items": [
        {
          "id": "https://credit.niso.org/contributor-roles/conceptualization/",
          "label": "Conceptualization"
        },
        {
          "id": "https://credit.niso.org/contributor-roles/data-curation/",
          "label": "Data Curation"
        },
        {
          "id": "https://credit.niso.org/contributor-roles/formal-analysis/",
          "label": "Formal Analysis"
        },
        {
          "id": "https://credit.niso.org/contributor-roles/funding-acquisition/",
          "label": "Funding Acquisition"
        },
        {
          "id": "https://credit.niso.org/contributor-roles/investigation/",
          "label": "Investigation"
        },
        {
          "id": "https://credit.niso.org/contributor-roles/methodology/",
          "label": "Methodology"
        },
        {
          "id": "https://credit.niso.org/contributor-roles/project-administration/",
          "label": "Project Administration"
        },
        {
          "id": "https://credit.niso.org/contributor-roles/resources/",
          "label": "Resources"
        },
        {
          "id": "https://credit.niso.org/contributor-roles/software/",
          "label": "Software"
        },
        {
          "id": "https://credit.niso.org/contributor-roles/supervision/",
          "label": "Supervision"
        },
        {
          "id": "https://credit.niso.org/contributor-roles/validation/",
          "label": "Validation"
        },
        {
          "id": "https://credit.niso.org/contributor-roles/visualization/",
          "label": "Visualization"
        },
        {
          "id": "https://credit.niso.org/contributor-roles/writing-original-draft/",
          "label": "Writing - Original Draft"
        },
        {
          "id": "https://credit.niso.org/contributor-roles/writing-review-editing/",
          "label": "Writing - Review and Editing"
        }
      ]
    },
    "organism_presets": {
      "label": "Organismes modeles",
      "items": [
        {
          "id": "http://purl.obolibrary.org/obo/NCBITaxon_10090",
          "label": "Mus musculus",
          "display": "Souris (Mus musculus)",
          "emoji": "üê≠",
          "taxon_id": "10090",
          "scheme": "NCBITaxon",
          "triggers": [
            "strain_search",
            "gene_search"
          ]
        },
        {
          "id": "http://purl.obolibrary.org/obo/NCBITaxon_10116",
          "label": "Rattus norvegicus",
          "display": "Rat (Rattus norvegicus)",
          "emoji": "üêÄ",
          "taxon_id": "10116",
          "scheme": "NCBITaxon",
          "triggers": [
            "strain_search",
            "gene_search"
          ]
        },
        {
          "id": "http://purl.obolibrary.org/obo/NCBITaxon_7955",
          "label": "Danio rerio",
          "display": "Poisson-zebre (Danio rerio)",
          "emoji": "üêü",
          "taxon_id": "7955",
          "scheme": "NCBITaxon",
          "triggers": [
            "gene_search"
          ]
        },
        {
          "id": "http://purl.obolibrary.org/obo/NCBITaxon_7227",
          "label": "Drosophila melanogaster",
          "display": "Drosophile (D. melanogaster)",
          "emoji": "ü™∞",
          "taxon_id": "7227",
          "scheme": "NCBITaxon",
          "triggers": [
            "gene_search"
          ]
        },
        {
          "id": "__OTHER__",
          "label": "Autre",
          "display": "Autre (Recherche NCBI Taxonomy)",
          "emoji": "üîç",
          "taxon_id": null,
          "scheme": "NCBITaxon",
          "triggers": [
            "organism_search"
          ]
        }
      ]
    }
  },
  "sections": [
    {
      "id": "title",
      "title": "Titre du Dataset",
      "icon": "üìÑ",
      "open_default": true,
      "fields": [
        {
          "id": "title_main",
          "label": "Titre principal",
          "type": "text",
          "required": true,
          "row": "full",
          "placeholder": "Ex : Transcriptome hippocampique de souris APP/PS1 a 6 mois",
          "output": {
            "path": "titles",
            "mode": "append",
            "tpl": {
              "title": "$value"
            }
          }
        },
        {
          "id": "title_alt",
          "label": "Titre alternatif",
          "type": "text",
          "required": false,
          "row": "half",
          "placeholder": "Traduction anglaise ou acronyme",
          "output": {
            "path": "titles",
            "mode": "append_if",
            "tpl": {
              "title": "$value",
              "titleType": "AlternativeTitle"
            }
          }
        },
        {
          "id": "publication_year",
          "label": "Annee de publication",
          "type": "number",
          "required": true,
          "row": "half",
          "default": 2024,
          "min": 2000,
          "max": 2030,
          "output": {
            "path": "publicationYear",
            "mode": "set_int"
          }
        },
        {
          "id": "resource_type",
          "label": "Type de ressource",
          "type": "select",
          "required": true,
          "default": "Dataset",
          "options": [
            {
              "value": "Dataset",
              "label": "üìä Dataset (donn√©es tabulaires, s√©ries temporelles)"
            },
            {
              "value": "Collection",
              "label": "üì¶ Collection (ensemble de datasets)"
            },
            {
              "value": "Image",
              "label": "üñºÔ∏è  Image (microscopy, imaging)"
            },
            {
              "value": "Text",
              "label": "üìÑ Text (rapport, protocole)"
            },
            {
              "value": "Software",
              "label": "üíª Software (code, pipeline)"
            },
            {
              "value": "PhysicalObject",
              "label": "üß™ PhysicalObject (√©chantillon biologique)"
            },
            {
              "value": "Model",
              "label": "üß† Model (mod√®le computationnel)"
            },
            {
              "value": "Workflow",
              "label": "üîÑ Workflow (pipeline d'analyse)"
            },
            {
              "value": "Other",
              "label": "üîπ Other"
            }
          ],
          "row": "full",
          "output": {
            "path": "types",
            "mode": "append",
            "tpl": {
              "resourceType": "$value",
              "resourceTypeGeneral": "$value"
            }
          }
        }
      ]
    },
    {
      "id": "creators",
      "title": "Auteurs & Contributeurs",
      "icon": "üë•",
      "open_default": true,
      "repeatable": true,
      "repeat_label": "Auteur",
      "add_label": "+ Ajouter un auteur",
      "output": {
        "path": "creators",
        "mode": "collect_object"
      },
      "fields": [
        {
          "id": "given_name",
          "label": "Prenom",
          "type": "text",
          "required": true,
          "row": "half",
          "output": {
            "obj_key": "givenName"
          }
        },
        {
          "id": "family_name",
          "label": "Nom de famille",
          "type": "text",
          "required": true,
          "row": "half",
          "output": {
            "obj_key": "familyName"
          }
        },
        {
          "id": "orcid",
          "label": "ORCID iD",
          "type": "api_search",
          "api": "orcid",
          "orcid_autofill_from": [
            "given_name",
            "family_name"
          ],
          "allow_manual": false,
          "placeholder": "Prenom Nom a rechercher‚Ä¶",
          "output": {
            "obj_key": "nameIdentifiers",
            "mode": "wrap_array",
            "map": {
              "nameIdentifier": "$id",
              "nameIdentifierScheme": "ORCID",
              "schemeURI": "https://orcid.org/"
            }
          }
        },
        {
          "id": "affiliation",
          "label": "Affiliation (ROR)",
          "type": "api_search",
          "api": "ror",
          "allow_manual": true,
          "placeholder": "Nom de l institution, ville‚Ä¶",
          "output": {
            "obj_key": "affiliation",
            "mode": "wrap_array",
            "map": {
              "affiliation": "$label",
              "affiliationIdentifier": "$id",
              "affiliationIdentifierScheme": "ROR",
              "schemeURI": "https://ror.org/"
            }
          }
        },
        {
          "id": "contributor_roles",
          "label": "R√¥les dans le projet (CRediT)",
          "type": "multi_select",
          "vocabulary": "credit_roles",
          "help": "Selon la taxonomie CRediT (NISO). Ces personnes seront list√©es comme contributeurs dans les m√©tadonn√©es DataCite.",
          "output": {
            "path": "contributors",
            "mode": "append_from_array",
            "tpl": {
              "name": "$creator_name",
              "nameType": "Personal",
              "contributorType": "Other",
              "contributorRoles": [
                {
                  "contributorRole": "$label",
                  "contributorRoleURI": "$id",
                  "contributorRoleScheme": "CRediT",
                  "contributorRoleSchemeURI": "https://credit.niso.org/"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "id": "description",
      "title": "Description du dataset",
      "icon": "üìù",
      "open_default": true,
      "fields": [
        {
          "id": "abstract",
          "label": "R√©sum√© / Abstract",
          "type": "textarea",
          "required": false,
          "rows": 6,
          "placeholder": "D√©crivez bri√®vement le contexte, les objectifs et les principaux r√©sultats de ce dataset‚Ä¶",
          "help": "Ce texte appara√Ætra comme description principale dans les m√©tadonn√©es DataCite.",
          "output": {
            "path": "descriptions",
            "mode": "append",
            "tpl": {
              "description": "$value",
              "descriptionType": "Abstract"
            }
          }
        }
      ]
    },
    {
      "id": "organism",
      "title": "Modele Biologique",
      "icon": "üê≠",
      "open_default": true,
      "fields": [
        {
          "id": "organism_choice",
          "label": "Organisme modele",
          "type": "preset_or_search",
          "vocabulary": "organism_presets",
          "search_api": "ols_ncbitaxon",
          "required": true,
          "allow_manual": false,
          "placeholder": "Rechercher dans NCBI Taxonomy‚Ä¶",
          "output": {
            "path": "subjects",
            "mode": "append",
            "tpl": {
              "subject": "$label",
              "subjectScheme": "NCBITaxon",
              "valueURI": "$id",
              "schemeURI": "http://purl.obolibrary.org/obo/"
            },
            "also_description": true
          }
        }
      ]
    },
    {
      "id": "strain",
      "title": "Fond Genetique / Souche",
      "icon": "üß¨",
      "open_default": true,
      "condition": {
        "type": "organism_trigger",
        "trigger": "strain_search"
      },
      "fields": [
        {
          "id": "strain_search",
          "label": "Souche ou lignee",
          "type": "api_search",
          "api": "ols_efo",
          "allow_manual": true,
          "placeholder": "Ex : C57BL/6J, BALB/c, Wistar, Sprague-Dawley‚Ä¶",
          "output": {
            "path": "subjects",
            "mode": "append",
            "tpl": {
              "subject": "Strain: $label",
              "subjectScheme": "$scheme",
              "valueURI": "$id"
            },
            "also_description": true
          }
        }
      ]
    },
    {
      "id": "interventions",
      "title": "Interventions Experimentales",
      "icon": "üî¨",
      "open_default": true,
      "fields": [
        {
          "id": "intervention_types",
          "label": "Selectionnez les interventions a decrire",
          "type": "checkbox_group",
          "options": [
            {
              "value": "GENE",
              "label": "Modification Genetique",
              "emoji": "üß¨",
              "opens_section": "genes"
            },
            {
              "value": "CHEM",
              "label": "Traitement Chimique / Pharmacologique",
              "emoji": "üíä",
              "opens_section": "chemicals"
            },
            {
              "value": "DIET",
              "label": "Regime Alimentaire",
              "emoji": "ü•ó",
              "opens_section": "diet"
            },
            {
              "value": "DIS",
              "label": "Modele de Maladie",
              "emoji": "üè•",
              "opens_section": "disease"
            },
            {
              "value": "ANAT",
              "label": "Tissu / Organe d interet",
              "emoji": "ü´Ä",
              "opens_section": "anatomy"
            }
          ]
        }
      ]
    },
    {
      "id": "genes",
      "title": "Genes Impliques",
      "icon": "üß¨",
      "open_default": true,
      "condition": {
        "type": "checkbox_includes",
        "field_id": "intervention_types",
        "value": "GENE"
      },
      "repeatable": true,
      "repeat_label": "Gene",
      "add_label": "+ Ajouter un gene",
      "fields": [
        {
          "id": "gene_search",
          "label": "Symbole, nom ou identifiant du gene",
          "type": "api_search",
          "api": "mygene",
          "use_organism_taxon": true,
          "allow_manual": true,
          "show_xrefs": true,
          "help": "Accepte : symbole (Apoe), MGI:88057, ENSMUSG00000002985, NCBI ID (11287)",
          "placeholder": "Ex : Apoe, MGI:88057, ENSMUSG00000002985‚Ä¶",
          "output": {
            "path": "subjects",
            "mode": "append",
            "tpl": {
              "subject": "Gene: $label",
              "subjectScheme": "$scheme",
              "valueURI": "$id"
            },
            "xref_key": "identifiers",
            "also_description": true
          }
        }
      ]
    },
    {
      "id": "chemicals",
      "title": "Molecules & Traitements",
      "icon": "üíä",
      "open_default": true,
      "condition": {
        "type": "checkbox_includes",
        "field_id": "intervention_types",
        "value": "CHEM"
      },
      "repeatable": true,
      "repeat_label": "Molecule",
      "add_label": "+ Ajouter une molecule",
      "fields": [
        {
          "id": "chem_search",
          "label": "Molecule (ChEBI)",
          "type": "api_search",
          "api": "ols_chebi",
          "allow_manual": true,
          "placeholder": "Ex : Tamoxifen, Doxycycline, Metformin‚Ä¶",
          "output": {
            "path": "subjects",
            "mode": "append",
            "tpl": {
              "subject": "$label",
              "subjectScheme": "$scheme",
              "valueURI": "$id"
            },
            "also_description": true
          }
        }
      ]
    },
    {
      "id": "diet",
      "title": "Regime Alimentaire",
      "icon": "ü•ó",
      "open_default": true,
      "condition": {
        "type": "checkbox_includes",
        "field_id": "intervention_types",
        "value": "DIET"
      },
      "fields": [
        {
          "id": "diet_search",
          "label": "Regime (EFO)",
          "type": "api_search",
          "api": "ols_efo",
          "allow_manual": true,
          "placeholder": "Ex : High fat diet, Caloric restriction, Western diet‚Ä¶",
          "output": {
            "path": "subjects",
            "mode": "append",
            "tpl": {
              "subject": "$label",
              "subjectScheme": "$scheme",
              "valueURI": "$id"
            },
            "also_description": true
          }
        }
      ]
    },
    {
      "id": "disease",
      "title": "Modele de Maladie",
      "icon": "üè•",
      "open_default": true,
      "condition": {
        "type": "checkbox_includes",
        "field_id": "intervention_types",
        "value": "DIS"
      },
      "fields": [
        {
          "id": "disease_search",
          "label": "Maladie modelisee (DOID)",
          "type": "api_search",
          "api": "ols_doid",
          "allow_manual": true,
          "placeholder": "Ex : Alzheimer disease, Type 2 diabetes mellitus‚Ä¶",
          "output": {
            "path": "subjects",
            "mode": "append",
            "tpl": {
              "subject": "$label",
              "subjectScheme": "$scheme",
              "valueURI": "$id"
            },
            "also_description": true
          }
        }
      ]
    },
    {
      "id": "anatomy",
      "title": "Tissu / Organe d interet",
      "icon": "ü´Ä",
      "open_default": true,
      "condition": {
        "type": "checkbox_includes",
        "field_id": "intervention_types",
        "value": "ANAT"
      },
      "repeatable": true,
      "repeat_label": "Tissu",
      "add_label": "+ Ajouter un tissu",
      "fields": [
        {
          "id": "anat_search",
          "label": "Tissu ou organe (UBERON)",
          "type": "api_search",
          "api": "ols_uberon",
          "allow_manual": true,
          "placeholder": "Ex : Brain, Hippocampus, Liver, Heart‚Ä¶",
          "output": {
            "path": "subjects",
            "mode": "append",
            "tpl": {
              "subject": "$label",
              "subjectScheme": "$scheme",
              "valueURI": "$id"
            },
            "also_description": true
          }
        }
      ]
    },
    {
      "id": "assay",
      "title": "Type d'Analyse / Technique",
      "icon": "üî≠",
      "open_default": false,
      "fields": [
        {
          "id": "assay_type",
          "label": "Type d'analyse (OBI)",
          "type": "api_search",
          "api": "ols_obi",
          "allow_manual": true,
          "placeholder": "Ex : RNA sequencing assay, mass spectrometry assay, microscopy‚Ä¶",
          "help": "Ontologie OBI (Ontology for Biomedical Investigations). Accepte la saisie libre si non trouv√©.",
          "output": {
            "path": "subjects",
            "mode": "append",
            "tpl": {
              "subject": "Assay: $label",
              "subjectScheme": "$scheme",
              "valueURI": "$id"
            },
            "also_description": true
          }
        }
      ]
    },
    {
      "id": "license",
      "title": "Licence & Droits d'Acc√®s",
      "icon": "‚öñÔ∏è",
      "open_default": false,
      "fields": [
        {
          "id": "license_choice",
          "label": "Licence (SPDX)",
          "type": "select",
          "required": false,
          "vocabulary": "spdx_licenses",
          "use_vocabulary_as_options": true,
          "help": "Choisissez la licence qui r√©git l'utilisation de ce dataset. CC0 ou CC-BY recommand√©s pour les donn√©es ouvertes.",
          "output": {
            "path": "rightsList",
            "mode": "append",
            "tpl": {
              "rights": "$label",
              "rightsURI": "$id",
              "rightsIdentifier": "$value",
              "rightsIdentifierScheme": "SPDX",
              "schemeURI": "https://spdx.org/licenses/"
            }
          }
        }
      ]
    },
    {
      "id": "related_identifiers",
      "title": "Identifiants Li√©s",
      "icon": "üîó",
      "open_default": false,
      "repeatable": true,
      "repeat_label": "Lien",
      "add_label": "+ Ajouter un identifiant li√©",
      "output": {
        "path": "relatedIdentifiers",
        "mode": "collect_object"
      },
      "fields": [
        {
          "id": "relation_type",
          "label": "Type de relation",
          "type": "select",
          "required": false,
          "row": "half",
          "options": [
            {
              "value": "IsSupplementTo",
              "label": "üìé Suppl√©ment de (publication)"
            },
            {
              "value": "IsDescribedBy",
              "label": "üìÑ D√©crit par (article, protocole)"
            },
            {
              "value": "IsDerivedFrom",
              "label": "üîÑ D√©riv√© de (dataset source)"
            },
            {
              "value": "IsPartOf",
              "label": "üì¶ Fait partie de (collection)"
            },
            {
              "value": "HasPart",
              "label": "üìÇ Contient (sous-dataset)"
            },
            {
              "value": "IsReferencedBy",
              "label": "üìå R√©f√©renc√© par"
            },
            {
              "value": "References",
              "label": "üîç R√©f√©rence"
            },
            {
              "value": "IsDocumentedBy",
              "label": "üìã Document√© par (protocole)"
            },
            {
              "value": "IsVariantFormOf",
              "label": "üîÄ Variante de"
            },
            {
              "value": "IsIdenticalTo",
              "label": "üü∞ Identique √† (miroir)"
            },
            {
              "value": "IsSourceOf",
              "label": "üå± Source de"
            },
            {
              "value": "Cites",
              "label": "üí¨ Cite"
            }
          ],
          "output": {
            "obj_key": "relationType"
          }
        },
        {
          "id": "identifier_type",
          "label": "Type d'identifiant",
          "type": "select",
          "required": false,
          "row": "half",
          "options": [
            {
              "value": "DOI",
              "label": "DOI"
            },
            {
              "value": "URL",
              "label": "URL"
            },
            {
              "value": "PMID",
              "label": "PubMed ID"
            },
            {
              "value": "PMCID",
              "label": "PubMed Central ID"
            },
            {
              "value": "arXiv",
              "label": "arXiv"
            },
            {
              "value": "Handle",
              "label": "Handle"
            },
            {
              "value": "RRID",
              "label": "RRID (Research Resource)"
            },
            {
              "value": "IGSN",
              "label": "IGSN (Sample)"
            },
            {
              "value": "ISBN",
              "label": "ISBN"
            }
          ],
          "output": {
            "obj_key": "relatedIdentifierType"
          }
        },
        {
          "id": "related_identifier_value",
          "label": "Identifiant",
          "type": "text",
          "required": false,
          "row": "full",
          "placeholder": "Ex : 10.1038/s41586-021-03819-2  ou  https://www.protocols.io/view/...",
          "output": {
            "obj_key": "relatedIdentifier"
          }
        }
      ]
    },
    {
      "id": "funding",
      "title": "Financement",
      "icon": "üí∞",
      "open_default": false,
      "repeatable": true,
      "repeat_label": "Financement",
      "add_label": "+ Ajouter un financement",
      "output": {
        "path": "fundingReferences",
        "mode": "collect_object"
      },
      "fields": [
        {
          "id": "funder_name",
          "label": "Organisme financeur",
          "type": "text",
          "required": true,
          "row": "half",
          "placeholder": "Ex : ANR, NIH, Wellcome Trust, H2020, ERC‚Ä¶",
          "output": {
            "obj_key": "funderName"
          }
        },
        {
          "id": "grant_number",
          "label": "Num√©ro de grant / contrat",
          "type": "text",
          "required": false,
          "row": "half",
          "placeholder": "Ex : ANR-21-CE45-0001, R01AG012345‚Ä¶",
          "output": {
            "obj_key": "awardNumber"
          }
        },
        {
          "id": "grant_title",
          "label": "Titre du projet financ√©",
          "type": "text",
          "required": false,
          "row": "full",
          "placeholder": "Titre complet du projet ou de la subvention",
          "output": {
            "obj_key": "awardTitle"
          }
        }
      ]
    },
    {
      "id": "cohort",
      "title": "Cohorte & Points Temporels",
      "icon": "üìÖ",
      "open_default": false,
      "fields": [
        {
          "id": "cohort_sex",
          "label": "Sexe",
          "type": "select",
          "required": false,
          "row": "half",
          "default": "",
          "options": [
            {
              "value": "",
              "label": "‚Äî Non sp√©cifi√© ‚Äî"
            },
            {
              "value": "Both",
              "label": "‚ôÄ‚ôÇ Les deux sexes"
            },
            {
              "value": "Male",
              "label": "‚ôÇ M√¢le uniquement"
            },
            {
              "value": "Female",
              "label": "‚ôÄ Femelle uniquement"
            },
            {
              "value": "Unknown",
              "label": "‚ùì Inconnu"
            }
          ],
          "output": {
            "path": "descriptions",
            "mode": "append_if",
            "tpl": {
              "description": "Cohort sex: $value",
              "descriptionType": "TechnicalInfo"
            }
          }
        },
        {
          "id": "cohort_size",
          "label": "Effectif total (n)",
          "type": "number",
          "required": false,
          "row": "half",
          "min": 1,
          "placeholder": "Ex : 24",
          "output": {
            "path": "descriptions",
            "mode": "append_if",
            "tpl": {
              "description": "Cohort size: $value subjects",
              "descriptionType": "TechnicalInfo"
            }
          }
        },
        {
          "id": "cohort_age_value",
          "label": "√Çge",
          "type": "number",
          "required": false,
          "row": "half",
          "min": 0,
          "placeholder": "Ex : 6",
          "output": null
        },
        {
          "id": "cohort_age_unit",
          "label": "Unit√© d'√¢ge",
          "type": "select",
          "required": false,
          "row": "half",
          "default": "weeks",
          "options": [
            {
              "value": "days",
              "label": "Jours"
            },
            {
              "value": "weeks",
              "label": "Semaines"
            },
            {
              "value": "months",
              "label": "Mois"
            },
            {
              "value": "years",
              "label": "Ann√©es"
            }
          ],
          "output": null
        },
        {
          "id": "timepoints",
          "label": "Points temporels",
          "type": "text",
          "required": false,
          "row": "full",
          "placeholder": "Ex : 3, 6, 12 months post-injection; baseline, 24h, 48h",
          "help": "D√©crivez les temps de mesure ou de sacrifice.",
          "output": {
            "path": "descriptions",
            "mode": "append_if",
            "tpl": {
              "description": "Timepoints: $value",
              "descriptionType": "TechnicalInfo"
            }
          }
        }
      ]
    },
    {
      "id": "phenotyping",
      "title": "Phenotypage (IMPC)",
      "icon": "üêÅ",
      "open_default": false,
      "fields": [
        {
          "id": "impc_search",
          "label": "Param√®tre IMPC",
          "type": "api_search",
          "api": "impc",
          "allow_manual": true,
          "placeholder": "Ex : Glucose, Body Weight, Grip Strength...",
          "output": {
            "path": "subjects",
            "mode": "append",
            "tpl": {
              "subject": "IMPC: $label",
              "subjectScheme": "$scheme",
              "valueURI": "$id"
            },
            "also_description": true
          }
        }
      ]
    }
  ]
}